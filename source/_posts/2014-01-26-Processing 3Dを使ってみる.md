---
title: Processing 3Dを使ってみる
date: 2014-01-26 14:02:08
category: プログラミング
tags: Processing
---

## はじめに

Processing には、3D を扱う命令が標準で多く存在する。これらを使うことで 3D を使用したプログラミングが手軽に行える。今回は、具体的な例を用いて解説してみたい。



## 3D でスケッチを開始する

3D を利用するのは簡単である。基本的には次のように記述すればよい。

<script type="text/javascript" src="https://gist.github.com/salmon2073/8628747.js"></script>

サイズの 3 つ目のパラメーターでは、レンダラを指定することができる。
以前は４つほど種類があって OpenGL と P3D が使い分けられていたりしたが、バージョン 2.0 からは P2D と P3D に統合された。



## 3D 上でスケッチしてみる

では、さっそく 3D 上で描画をしてみよう。シンプルに、直方体を描いてみよう。

<script type="text/javascript" src="https://gist.github.com/salmon2073/8628747.js"></script>

ようこそ 3D の世界へ。
シンプルにという割には一見難しそうにみえるが、実際にやっていることは簡単である。
まず、translate()について

命令

translate(ｘ座標, ｙ座標, ｚ座標);
指定した座標の位置が（０，０，０）となるように座標を動かす。3D 描画では、物体ではなく紙のほうを動かして描画位置をずらすことで物体がうごいているように見える。
ちなみに、ｚ座標のパラメーターはなくてもよい。
続いて rotate について

命令

rotateX(回転角度);
rottateY(回転角度);
rotateZ(回転角度);
それぞれ、ｘ、ｙ、ｚ座標に対して回転角度分座標を回転させる。
最後に box()について

命令

box(縦, 横, 高さ);
記述されたとおりの直方体が今の（0,0,0）を<span style="color: #cc0000;">中心</span>に描画される。



## 立体を複数個描く　 pushMatrix と popMatrix

複数立体を描く場合、それぞれの物体を描く前に座標を元に戻す必要がある。
他にもやり方があるかもしれないが、僕は以下のようにして複数個立体を描いている。

<script type="text/javascript" src="https://gist.github.com/salmon2073/8ed4cdbb3232feca2b3d.js"></script>

ここで使われている pushMatrix();は今の座標を保存してくれる命令である。popMatrix();でそれを呼び出すことができる。
つまり、pushMatrix();から popMatrix();までをひと塊と考えれば理解しやすいと思う。



## 終わりに

processing で 3D を使う際には座標に気をつけなければならない。
とはいえ、この間隔をマスターしてしまえば基本的には 2D と同じである。
ちなみに、点や線なども z 座標のパラメーターを追加することで 3D 上で利用できる。
スケッチの世界を広げてみよう。



##  
