---
title: Processing 3Dを使ってみる
date: 2014-01-26 14:02:08
category: Processing
---

## はじめに
Processingには、3Dを扱う命令が標準で多く存在する。これらを使うことで3Dを使用したプログラミングが手軽に行える。今回は、具体的な例を用いて解説してみたい。
 
## 3Dでスケッチを開始する
3Dを利用するのは簡単である。基本的には次のように記述すればよい。
<script type="text/javascript" src="https://gist.github.com/salmon2073/8628747.js"></script>
サイズの3つ目のパラメーターでは、レンダラを指定することができる。
以前は４つほど種類があってOpenGLとP3Dが使い分けられていたりしたが、バージョン2.0からはP2DとP3Dに統合された。
 
## 3D上でスケッチしてみる
では、さっそく3D上で描画をしてみよう。シンプルに、直方体を描いてみよう。
<script type="text/javascript" src="https://gist.github.com/salmon2073/8628747.js"></script>
ようこそ3Dの世界へ。
シンプルにという割には一見難しそうにみえるが、実際にやっていることは簡単である。
まず、translate()について

命令

translate(ｘ座標, ｙ座標, ｚ座標);
指定した座標の位置が（０，０，０）となるように座標を動かす。3D描画では、物体ではなく紙のほうを動かして描画位置をずらすことで物体がうごいているように見える。
ちなみに、ｚ座標のパラメーターはなくてもよい。
続いてrotateについて

命令

rotateX(回転角度);
rottateY(回転角度);
rotateZ(回転角度);
それぞれ、ｘ、ｙ、ｚ座標に対して回転角度分座標を回転させる。
最後にbox()について

命令

box(縦, 横, 高さ);
記述されたとおりの直方体が今の（0,0,0）を<span style="color: #cc0000;">中心</span>に描画される。
 
## 立体を複数個描く　pushMatrixとpopMatrix
複数立体を描く場合、それぞれの物体を描く前に座標を元に戻す必要がある。
他にもやり方があるかもしれないが、僕は以下のようにして複数個立体を描いている。
<script type="text/javascript" src="https://gist.github.com/salmon2073/8ed4cdbb3232feca2b3d.js"></script>
 ここで使われているpushMatrix();は今の座標を保存してくれる命令である。popMatrix();でそれを呼び出すことができる。
つまり、pushMatrix();からpopMatrix();までをひと塊と考えれば理解しやすいと思う。
 
## 終わりに
processingで3Dを使う際には座標に気をつけなければならない。
とはいえ、この間隔をマスターしてしまえば基本的には2Dと同じである。
ちなみに、点や線などもz座標のパラメーターを追加することで3D上で利用できる。
スケッチの世界を広げてみよう。
 
 
---
